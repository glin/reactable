/* jquery.sparkline 2.1.3 - http://omnipotent.net/jquery.sparkline/ 
 Licensed under the New BSD License - see above site for details */
!function(a,b,c){!function(a){"function"==typeof define&&define.amd?define("jquery.sparkline",["jquery"],a):jQuery&&!jQuery.fn.sparkline&&a(jQuery)}(function(d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={},O=0;e=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",refLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:c,normalRangeMax:c,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:c,chartRangeMax:c,chartRangeMinX:c,chartRangeMaxX:c,tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:c,nullColor:c,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:c,chartRangeMin:c,chartRangeClip:!1,colorMap:c,tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},timeline:{width:120,height:3,lineColor:"#6792c6",fillColor:"#bad7fb",orientation:"horizontal",timeMarkInterval:0,begin:new Date(2e3,1,1,0,0),finish:new Date(2e3,1,1,23,59),init:function(a){return{begin:new Date(a.begin),finish:new Date(a.finish),title:a.title,color:a.color}},tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{title}}: {{begin}} / {{finish}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value:map}}{{suffix}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:c,thresholdValue:0,chartRangeMax:c,chartRangeMin:c,chartRangeClip:!1,tooltipFormat:new g("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:c,tooltipFormat:new g("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}} ({{percent.1}}%){{suffix}}')},stack:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new g('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:c,targetColor:"#4a2",chartRangeMax:c,chartRangeMin:c,tooltipFormat:new g("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};var P="-webkit-box-sizing: content-box !important;-moz-box-sizing: content-box !important;box-sizing: content-box !important;";G='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;'+P+"}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}.jqstooltip:before, .jqstooltip:after { "+P+"}",f=function(){var a,b;return a=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(a.prototype=d.extend(new arguments[0],arguments[arguments.length-1]),a._super=arguments[0].prototype):a.prototype=arguments[arguments.length-1],arguments.length>2&&(b=Array.prototype.slice.call(arguments,1,-1),b.unshift(a.prototype),d.extend.apply(d,b))):a.prototype=arguments[0],a.prototype.cls=a,a},d.SPFormatClass=g=f({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(a,b){this.format=a,this.fclass=b},render:function(a,b,d){var e,f,g,h,i,j=this,k=a;return this.format.replace(this.fre,function(){var a;return f=arguments[1],g=arguments[3],e=j.precre.exec(f),e?(i=e[2],f=e[1]):i=!1,h=k[f],h===c?"":g&&b&&b[g]?(a=b[g],a.get?b[g].get(h)||h:b[g][h]||h):(n(h)&&(h=d.get("numberFormatter")?d.get("numberFormatter")(h):s(h,i,d.get("numberDigitGroupCount"),d.get("numberDigitGroupSep"),d.get("numberDecimalMark"))),h)})}}),d.spformat=function(a,b){return new g(a,b)},h=function(a,b,c){return a<b?b:a>c?c:a},i=function(a){var b,c;if(0===a.length%2){var d,e;c=a.length/2,d=a[c-1],e=a[c],b=(d+e)/2}else c=parseInt(a.length/2),b=a[c];return{m:b,idx:c}},j=function(a,b){var c,d,e;if(d=i(a),2===b)c=d.m;else{var f=[];if(e=d.m,null!=e){var g=0;if(1===b){for(;g<d.idx;)f[g]=a[g],g++;f.length||(f=[a[0]])}else if(3===b){for(var h=a.length-1;h>d.idx;)f[g]=a[h],g++,h--;f.length||(f=[a[a.length-1]])}}d=i(f),c=d.m}return c},k=function(a){var b;switch(a){case"undefined":a=c;break;case"null":a=null;break;case"true":a=!0;break;case"false":a=!1;break;default:b=parseFloat(a),a==b&&(a=b)}return a},l=function(a){var b,c=[];for(b=a.length;b--;)c[b]=k(a[b]);return c},m=function(a,b){var c,d,e=[];for(c=0,d=a.length;c<d;c++)a[c]!==b&&e.push(a[c]);return e},n=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},s=function(a,b,c,e,f){var g,h;for(a=(b===!1?parseFloat(a).toString():a.toFixed(b)).split(""),g=(g=d.inArray(".",a))<0?a.length:g,g<a.length&&(a[g]=f),h=g-c;h>0;h-=c)a.splice(h,0,e);return a.join("")},o=function(a,b,c){var d;for(d=b.length;d--;)if((!c||null!==b[d])&&b[d]!==a)return!1;return!0},p=function(a){var b,c=0;for(b=a.length;b--;)c+="number"==typeof a[b]?a[b]:0;return c},r=function(a){return d.isArray(a)?a:[a]},q=function(b){var c,d;if(a.createStyleSheet)try{return void(a.createStyleSheet().cssText=b)}catch(e){d=!0}c=a.createElement("style"),c.type="text/css",a.getElementsByTagName("head")[0].appendChild(c),d?a.styleSheets[a.styleSheets.length-1].cssText=b:c["string"==typeof a.body.style.WebkitAppearance?"innerText":"innerHTML"]=b},d.fn.simpledraw=function(b,e,f,g){var h,i;if(f&&(h=this.data("_jqs_vcanvas")))return h;if(d.fn.sparkline.canvas===!1)return!1;if(d.fn.sparkline.canvas===c){var j=a.createElement("canvas");if(j.getContext&&j.getContext("2d"))d.fn.sparkline.canvas=function(a,b,c,d){return new K(a,b,c,d)};else{if(!a.namespaces||a.namespaces.v)return d.fn.sparkline.canvas=!1,!1;a.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),d.fn.sparkline.canvas=function(a,b,c,d){return new L(a,b,c)}}}return b===c&&(b=d(this).innerWidth()),e===c&&(e=d(this).innerHeight()),h=d.fn.sparkline.canvas(b,e,this,g),i=d(this).data("_jqs_mhandler"),i&&i.registerCanvas(h),h},d.fn.cleardraw=function(){var a=this.data("_jqs_vcanvas");a&&a.reset()},d.RangeMapClass=t=f({init:function(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&"string"==typeof b&&b.indexOf(":")>-1&&(c=b.split(":"),c[0]=0===c[0].length?-(1/0):parseFloat(c[0]),c[1]=0===c[1].length?1/0:parseFloat(c[1]),c[2]=a[b],d.push(c));this.map=a,this.rangelist=d||!1},get:function(a){var b,d,e,f=this.rangelist;if((e=this.map[a])!==c)return e;if(f)for(b=f.length;b--;)if(d=f[b],d[0]<=a&&d[1]>=a)return d[2];return c}}),d.range_map=function(a){return new t(a)},u=f({init:function(a,b){var c=d(a);this.$el=c,this.options=b,this.currentPageX=0,this.currentPageY=0,this.el=a,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!b.get("disableTooltips"),this.highlightEnabled=!b.get("disableHighlight")},registerSparkline:function(a){this.splist.push(a),this.over&&this.updateDisplay()},registerCanvas:function(a){var b=d(a.canvas);this.canvas=a,this.$canvas=b,b.mouseenter(d.proxy(this.mouseenter,this)),b.mouseleave(d.proxy(this.mouseleave,this)),b.click(d.proxy(this.mouseclick,this))},reset:function(a){this.splist=[],this.tooltip&&a&&(this.tooltip.remove(),this.tooltip=c)},mouseclick:function(a){var b=d.Event("sparklineClick");b.originalEvent=a,b.sparklines=this.splist,this.$el.trigger(b)},mouseenter:function(b){d(a.body).unbind("mousemove.jqs"),d(a.body).bind("mousemove.jqs",d.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=b.pageX,this.currentPageY=b.pageY,this.currentEl=b.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new v(this.options),this.tooltip.updatePosition(b.pageX,b.pageY)),this.updateDisplay()},mouseleave:function(){d(a.body).unbind("mousemove.jqs");var b,c,e=this.splist,f=e.length,g=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),c=0;c<f;c++)b=e[c],b.clearRegionHighlight()&&(g=!0);g&&this.canvas.render()},mousemove:function(a){this.currentPageX=a.pageX,this.currentPageY=a.pageY,this.currentEl=a.target,this.tooltip&&this.tooltip.updatePosition(a.pageX,a.pageY),this.updateDisplay()},updateDisplay:function(){var a,c,e,f,g,h=this.splist,i=h.length,j=!1,k=this.$canvas.offset(),l=b.round(this.currentPageX-k.left),m=b.round(this.currentPageY-k.top);if(this.over){for(e=0;e<i;e++)c=h[e],f=c.setRegionHighlight(this.currentEl,l,m),f&&(j=!0);if(j){if(g=d.Event("sparklineRegionChange"),g.sparklines=this.splist,this.$el.trigger(g),this.tooltip){for(a="",e=0;e<i;e++)c=h[e],a+=c.getCurrentRegionTooltip();this.tooltip.setContent(a)}this.disableHighlight||this.canvas.render()}null===f&&this.mouseleave()}}}),v=f({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(b){var c,e=b.get("tooltipClassname","jqstooltip"),f=this.sizeStyle;this.container=b.get("tooltipContainer")||a.body,this.tooltipOffsetX=b.get("tooltipOffsetX",10),this.tooltipOffsetY=b.get("tooltipOffsetY",12),this.displayOnLeft="left"===b.get("toolTipPosition"),d("#jqssizetip").remove(),d("#jqstooltip").remove(),this.sizetip=d("<div/>",{id:"jqssizetip",style:f,class:e}),this.tooltip=d("<div/>",{id:"jqstooltip",class:e}).appendTo(this.container),c=this.tooltip.offset(),this.offsetLeft=c.left,this.offsetTop=c.top,this.hidden=!0,d(window).unbind("resize.jqs scroll.jqs"),d(window).bind("resize.jqs scroll.jqs",d.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=d(window).scrollTop(),this.scrollLeft=d(window).scrollLeft(),this.scrollRight=this.scrollLeft+d(window).width(),this.updatePosition()},getSize:function(a){this.sizetip.html(a).appendTo(this.container);var b=parseInt(this.sizetip.css("padding-left"),10),c=parseInt(this.sizetip.css("padding-right"),10);this.padding=b+c+1,this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(a){return a?(this.getSize(a),this.tooltip.html(a).css({width:this.width,height:this.height,visibility:"visible"}),void(this.hidden&&(this.hidden=!1,this.updatePosition()))):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(a,b){if(a===c){if(this.mousex===c)return;a=this.mousex-this.offsetLeft,b=this.mousey-this.offsetTop}else this.mousex=a-=this.offsetLeft,this.mousey=b-=this.offsetTop;this.height&&this.width&&!this.hidden&&(b-=this.height+this.tooltipOffsetY,b<this.scrollTop&&(b=this.scrollTop),this.displayOnLeft?a-=this.tooltipOffsetX+this.width+this.padding:a+=this.tooltipOffsetX,a<this.scrollLeft?a=this.scrollLeft:a+this.width>this.scrollRight&&(a=this.scrollRight-this.width),this.tooltip.css({left:a,top:b}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=c,d(window).unbind("resize.jqs scroll.jqs")}}),H=function(){q(G)},d(H),M=[],d.fn.sparkline=function(b,e){return this.each(function(){var f,g,h=new d.fn.sparkline.options(this,e),i=d(this);if(f=function(){var e,f,g,j,k,l,m;return"html"===b||b===c?(m=this.getAttribute(h.get("tagValuesAttribute")),m!==c&&null!==m||(m=i.html()),e=m.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):e=b,f="auto"===h.get("width")?e.length*h.get("defaultPixelsPerValue"):h.get("width"),"auto"===h.get("height")?h.get("composite")&&d.data(this,"_jqs_vcanvas")||(j=a.createElement("span"),j.innerHTML="a",i.html(j),g=d(j).innerHeight()||d(j).height(),d(j).remove(),j=null):g=h.get("height"),h.get("disableInteraction")?k=!1:(k=d.data(this,"_jqs_mhandler"),k?h.get("composite")||k.reset():(k=new u(this,h),d.data(this,"_jqs_mhandler",k))),h.get("composite")&&!d.data(this,"_jqs_vcanvas")?void(d.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),d.data(this,"_jqs_errnotify",!0))):(l=new(d.fn.sparkline[h.get("type")])(this,e,h,f,g),l.render(),void(k&&k.registerSparkline(l)))},d(this).html()&&!h.get("disableHiddenCheck")&&d(this).is(":hidden")||!d(this).parents("body").length){if(!h.get("composite")&&d.data(this,"_jqs_pending"))for(g=M.length;g;g--)M[g-1][0]==this&&M.splice(g-1,1);M.push([this,f]),d.data(this,"_jqs_pending",!0)}else f.call(this)})},d.fn.sparkline.defaults=e(),d.sparkline_display_visible=function(){var a,b,c,e=[];for(b=0,c=M.length;b<c;b++)a=M[b][0],d(a).is(":visible")&&!d(a).parents().is(":hidden")?(M[b][1].call(a),d.data(M[b][0],"_jqs_pending",!1),e.push(b)):d(a).closest("html").length||d.data(a,"_jqs_pending")||(d.data(M[b][0],"_jqs_pending",!1),e.push(b));for(b=e.length;b;b--)M.splice(e[b-1],1)},d.fn.sparkline.options=f({init:function(a,b){var c,e,f,g;this.userOptions=b=b||{},this.tag=a,this.tagValCache={},e=d.fn.sparkline.defaults,f=e.common,this.tagOptionsPrefix=b.enableTagOptions&&(b.tagOptionsPrefix||f.tagOptionsPrefix),g=this.getTagSetting("type"),c=g===N?e[b.type||f.type]:e[g],this.mergedOptions=d.extend({},f,c,b)},getTagSetting:function(a){var b,d,e,f,g=this.tagOptionsPrefix;if(g===!1||g===c)return N;if(this.tagValCache.hasOwnProperty(a))b=this.tagValCache.key;else{if(b=this.tag.getAttribute(g+a),b===c||null===b)b=N;else if("["===b.substr(0,1))for(b=b.substr(1,b.length-2).split(","),d=b.length;d--;)b[d]=k(b[d].replace(/(^\s*)|(\s*$)/g,""));else if("{"===b.substr(0,1))for(e=b.substr(1,b.length-2).split(","),b={},d=e.length;d--;)f=e[d].split(":",2),b[f[0].replace(/(^\s*)|(\s*$)/g,"")]=k(f[1].replace(/(^\s*)|(\s*$)/g,""));else b=k(b);this.tagValCache.key=b}return b},get:function(a,b){var d,e=this.getTagSetting(a);return e!==N?e:(d=this.mergedOptions[a])===c?b:d}}),d.fn.sparkline._base=f({disabled:!1,init:function(a,b,e,f,g){this.el=a,this.$el=d(a),this.values=b,this.options=e,this.width=f,this.height=g,this.currentRegion=c},initTarget:function(){var a=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),a))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},initColorMap:function(){var a=this.options.get("colorMap");d.isFunction(a)?this.colorMapFunction=a:d.isArray(a)?this.colorMapFunction=function(b,c,d,e){if(d<a.length)return a[d]}:a&&(a.get===c&&(a=new t(a)),this.colorMapFunction=function(b,c,d,e){return a.get(e)})},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(a,b){},setRegionHighlight:function(a,b,e){var f,g=this.currentRegion,h=!this.options.get("disableHighlight"),i=d("canvas",this.el).width()+parseInt(d("canvas",this.el).css("padding-left"))+parseInt(d("canvas",this.el).css("padding-right"));return b>i||e>this.canvasHeight||b<0||e<0?null:(f=this.getRegion(a,b,e),g!==f&&(g!==c&&h&&this.removeHighlight(),this.currentRegion=f,f!==c&&h&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return this.currentRegion!==c&&(this.removeHighlight(),this.currentRegion=c,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(a){},getCurrentRegionTooltip:function(){var a,b,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t=this.options,u="",v=[];if(this.currentRegion===c)return"";if(a=this.getCurrentRegionFields(),n=t.get("tooltipFormatter"))return n(this,t,a);if(t.get("tooltipChartTitle")&&(u+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),b=this.options.get("tooltipFormat"),!b)return"";if(d.isArray(b)||(b=[b]),d.isArray(a)||(a=[a]),j=this.options.get("tooltipFormatFieldlist"),k=this.options.get("tooltipFormatFieldlistKey"),j&&k){for(l=[],i=a.length;i--;)m=a[i][k],(q=d.inArray(m,j))!=-1&&(l[q]=a[i]);a=l}for(e=b.length,p=a.length,i=0;i<e;i++)for(o=b[i],"string"==typeof o&&(o=new g(o)),f=o.fclass||"jqsfield",q=0;q<p;q++)a[q].isNull&&t.get("tooltipSkipNull")||(r="",s="",t.get("tooltipPrefixBinLabels")&&t.get("tooltipPrefixBinLabels").length>a[q].offset&&(r=t.get("tooltipPrefixBinLabels")[a[q].offset]),t.get("tooltipSuffixBinLabels")&&t.get("tooltipSuffixBinLabels").length>a[q].offset&&(s=t.get("tooltipSuffixBinLabels")[a[q].offset]),d.extend(a[q],{prefix:r+t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")+s}),h=o.render(a[q],t.get("tooltipValueLookups"),t),v.push('<div class="'+f+'">'+h+"</div>"));return v.length?u+v.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(a,c){var d,e,f,g,i=c.get("highlightColor"),j=c.get("highlightLighten");if(i)return i;if(j&&(d=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(a))){for(f=[],e=4===a.length?16:1,g=0;g<3;g++)f[g]=h(b.round(parseInt(d[g+1],16)*e*j),0,255);return"rgb("+f.join(",")+")"}return a}}),w={changeHighlight:function(a){var b,c=this.currentRegion,e=this.target,f=this.regionShapes[c];f>=0&&(b=this.renderRegion(c,a),d.isArray(b)||d.isArray(f)?(e.replaceWithShapes(f,b),this.regionShapes[c]=d.map(b,function(a){return a.id})):(e.replaceWithShape(f,b),this.regionShapes[c]=b.id))},render:function(){var a,b,c,e,f=this.values,g=this.target,h=this.regionShapes;if(this.cls._super.render.call(this)){for(c=f.length;c--;)if(a=this.renderRegion(c))if(d.isArray(a)){for(b=[],e=a.length;e--;)a[e].append(),b.push(a[e].id);h[c]=b}else a.append(),h[c]=a.id;else h[c]=null;g.render()}}},d.fn.sparkline.line=x=f(d.fn.sparkline._base,{type:"line",init:function(a,b,c,d,e){x._super.init.call(this,a,b,c,d,e),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(a,b,d){var e,f=this.regionMap;for(e=f.length;e--;)if(null!==f[e]&&b*window.devicePixelRatio>=f[e][0]&&b*window.devicePixelRatio<=f[e][1])return f[e][2];return c},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:null===this.yvalues[a],x:this.xvalues[a],y:this.yvalues[a],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:a}},renderHighlight:function(){var a,b,d=this.currentRegion,e=this.target,f=this.vertices[d],g=this.options,h=g.get("spotRadius"),i=g.get("highlightSpotColor"),j=g.get("highlightLineColor");f&&(h&&i&&(a=e.drawCircle(f[0],f[1],h,c,i),this.highlightSpotId=a.id,e.insertAfterShape(this.lastShapeId,a)),j&&(b=e.drawLine(f[0],this.canvasTop,f[0],this.canvasTop+this.canvasHeight,j),this.highlightLineId=b.id,e.insertAfterShape(this.lastShapeId,b)))},removeHighlight:function(){var a=this.target;this.highlightSpotId&&(a.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(a.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var a,c,d,e,f,g=this.values,h=g.length,i=this.xvalues,j=this.yvalues,k=this.yminmax;for(a=0;a<h;a++)c=g[a],d="string"==typeof g[a],e="object"==typeof g[a]&&g[a]instanceof Array,f=d&&g[a].split(":"),d&&2===f.length?(i.push(Number(f[0])),j.push(Number(f[1])),k.push(Number(f[1]))):e?(i.push(c[0]),j.push(c[1]),k.push(c[1])):(i.push(a),null===g[a]||"null"===g[a]?j.push(null):(j.push(Number(c)),k.push(Number(c))));this.options.get("xvalues")&&(i=this.options.get("xvalues")),this.maxy=this.maxyorg=b.max.apply(b,k),this.miny=this.minyorg=b.min.apply(b,k),this.maxx=b.max.apply(b,i),this.minx=b.min.apply(b,i),this.xvalues=i,this.yvalues=j,this.yminmax=k},processRangeOptions:function(){var a=this.options,b=a.get("normalRangeMin"),d=a.get("normalRangeMax");b!==c&&(b<this.miny&&(this.miny=b),d>this.maxy&&(this.maxy=d)),a.get("chartRangeMin")!==c&&(a.get("chartRangeClip")||a.get("chartRangeMin")<this.miny)&&(this.miny=a.get("chartRangeMin")),a.get("chartRangeMax")!==c&&(a.get("chartRangeClip")||a.get("chartRangeMax")>this.maxy)&&(this.maxy=a.get("chartRangeMax")),a.get("chartRangeMinX")!==c&&(a.get("chartRangeClipX")||a.get("chartRangeMinX")<this.minx)&&(this.minx=a.get("chartRangeMinX")),a.get("chartRangeMaxX")!==c&&(a.get("chartRangeClipX")||a.get("chartRangeMaxX")>this.maxx)&&(this.maxx=a.get("chartRangeMaxX"))},drawNormalRange:function(a,d,e,f,g){var h=this.options.get("normalRangeMin"),i=this.options.get("normalRangeMax"),j=d+b.round(e-e*((i-this.miny)/g)),k=b.round(e*(i-h)/g);this.target.drawRect(a,j,f,k,c,this.options.get("normalRangeColor")).append()},render:function(){var a,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,y,z,A,B,C,D,E=this.options,F=this.target,G=this.canvasWidth,H=this.canvasHeight,I=this.vertices,J=E.get("spotRadius"),K=this.regionMap;if(x._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),B=this.xvalues,C=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(g=h=0,a=this.maxx-this.minx===0?1:this.maxx-this.minx,e=this.maxy-this.miny===0?1:this.maxy-this.miny,f=this.yvalues.length-1,J&&(G<4*J||H<4*J)&&(J=0),J&&(z=E.get("highlightSpotColor")&&!E.get("disableInteraction"),(z||E.get("minSpotColor")||E.get("spotColor")&&C[f]===this.miny)&&(H-=b.ceil(J)),(z||E.get("maxSpotColor")||E.get("spotColor")&&C[f]===this.maxy)&&(H-=b.ceil(J),g+=b.ceil(J)),(z||(E.get("minSpotColor")||E.get("maxSpotColor"))&&(C[0]===this.miny||C[0]===this.maxy))&&(h+=b.ceil(J),G-=b.ceil(J)),(z||E.get("spotColor")||E.get("minSpotColor")||E.get("maxSpotColor")&&(C[f]===this.miny||C[f]===this.maxy))&&(G-=b.ceil(J))),H--,E.get("normalRangeMin")===c||E.get("drawNormalOnTop")||this.drawNormalRange(h,g,H,G,e),j=[],k=[j],q=r=null,s=C.length,D=0;D<s;D++)l=B[D],n=B[D+1],m=C[D],o=h+b.round((l-this.minx)*(G/a)),p=D<s-1?h+b.round((n-this.minx)*(G/a)):G,r=o+(p-o)/2,K[D]=[q||0,r,D],q=r,null===m?D&&(null!==C[D-1]&&(j=[],k.push(j)),I.push(null)):(m<this.miny&&(m=this.miny),m>this.maxy&&(m=this.maxy),j.length||j.push([o,g+H]),i=[o,g+b.round(H-H*((m-this.miny)/e))],j.push(i),I.push(i));for(u=[],v=[],w=k.length,D=0;D<w;D++)j=k[D],j.length&&(E.get("fillColor")&&(j.push([j[j.length-1][0],g+H]),v.push(j.slice(0)),j.pop()),j.length>2&&(j[0]=[j[0][0],j[1][1]]),u.push(j));for(w=v.length,D=0;D<w;D++)F.drawShape(v[D],E.get("fillColor"),E.get("fillColor")).append();for(E.get("normalRangeMin")!==c&&E.get("drawNormalOnTop")&&this.drawNormalRange(h,g,H,G,e),w=u.length,D=0;D<w;D++)F.drawShape(u[D],E.get("lineColor"),c,E.get("lineWidth")).append();if(J&&E.get("valueSpots"))for(y=E.get("valueSpots"),y.get===c&&(y=new t(y)),D=0;D<s;D++)A=y.get(C[D]),A&&F.drawCircle(h+b.round((B[D]-this.minx)*(G/a)),g+b.round(H-H*((C[D]-this.miny)/e)),J,c,A).append();J&&E.get("spotColor")&&null!==C[f]&&F.drawCircle(h+b.round((B[B.length-1]-this.minx)*(G/a)),g+b.round(H-H*((C[f]-this.miny)/e)),J,c,E.get("spotColor")).append(),this.maxy!==this.minyorg&&(J&&E.get("minSpotColor")&&(l=B[d.inArray(this.minyorg,C)],F.drawCircle(h+b.round((l-this.minx)*(G/a)),g+b.round(H-H*((this.minyorg-this.miny)/e)),J,c,E.get("minSpotColor")).append()),J&&E.get("maxSpotColor")&&(l=B[d.inArray(this.maxyorg,C)],F.drawCircle(h+b.round((l-this.minx)*(G/a)),g+b.round(H-H*((this.maxyorg-this.miny)/e)),J,c,E.get("maxSpotColor")).append())),null!=E.get("refLineX")&&(m=b.round(this.canvasHeight-(E.get("refLineX")-this.miny)*(this.canvasHeight/e)),F.drawLine(0,m,this.canvasWidth,m,E.get("refLineColor")).append()),null!=E.get("refLineY")&&(l=b.round((E.get("refLineY")-this.minx)*(this.canvasWidth/a)),F.drawLine(l,this.canvasHeight,l,0,E.get("refLineColor")).append()),this.lastShapeId=F.getLastShapeId(),this.canvasTop=g,F.render()}}}),d.fn.sparkline.bar=y=f(d.fn.sparkline._base,w,{type:"bar",init:function(a,e,f,g,i){var j,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=parseInt(f.get("barWidth"),10),O=parseInt(f.get("barSpacing"),10),P=f.get("chartRangeMin"),Q=f.get("chartRangeMax"),R=f.get("chartRangeClip"),S=1/0,T=-(1/0);for(y._super.init.call(this,a,e,f,g,i),v=0,w=e.length;v<w;v++)K=e[v],j="string"==typeof K&&K.indexOf(":")>-1,(j||d.isArray(K))&&(F=!0,j&&(K=e[v]=l(K.split(":"))),K=m(K,null),n=b.min.apply(b,K),o=b.max.apply(b,K),n<S&&(S=n),o>T&&(T=o));this.stacked=F,this.regionShapes={},this.barWidth=N,this.barSpacing=O,this.totalBarWidth=N+O;var U=e.length*N+(e.length-1)*O;for(this.xScale=b.min(1,U?g/U:1),this.width=U*this.xScale,this.initTarget(),R&&(D=P===c?-(1/0):P,E=Q===c?1/0:Q),F&&(s=P===c?S:b.min(S,P),t=Q===c?T:b.max(T,Q)),u=[],p=F?[]:u,r=[],q=[],v=0,w=e.length;v<w;v++)if(F)for(G=e[v],e[v]=J=[],r[v]=0,p[v]=q[v]=0,H=0,I=G.length;H<I;H++)K=J[H]=R?h(G[H],D,E):G[H],null!==K&&(K>0&&(r[v]+=K),S<0&&T>0?K<0?q[v]+=b.abs(K):p[v]+=K:p[v]+=b.abs(K-(K<0?t:s)),u.push(K));else K=R?h(e[v],D,E):e[v],K=e[v]=k(K),null!==K&&u.push(K);this.max=C=b.max.apply(b,u),this.min=B=b.min.apply(b,u),this.stackMax=T=F?b.max.apply(b,r):C,this.stackMin=S=F?b.min.apply(b,u):B,P!==c&&(R||P<B)&&(B=P),Q!==c&&(R||Q>C)&&(C=Q),this.zeroAxis=z=f.get("zeroAxis",!0),A=B<=0&&C>=0&&z?0:z===!1?B:B>0?B:C,this.xaxisOffset=A,x=F?b.max.apply(b,p)+b.max.apply(b,q):C-B,this.canvasHeightEf=z&&B<0?this.canvasHeight-2:this.canvasHeight-1,B<A?(M=F&&C>=0?T:C,L=(M-A)/x*this.canvasHeight,L!==b.ceil(L)&&(this.canvasHeightEf-=2,L=b.ceil(L))):L=this.canvasHeight,this.yoffset=L,this.initColorMap(),this.range=x},getRegion:function(a,d,e){d/=this.xScale;var f=b.floor(d*window.devicePixelRatio/this.totalBarWidth);return f<0||f>=this.values.length?c:f},getCurrentRegionFields:function(){var a,b,c=this.currentRegion,d=r(this.values[c]),e=[];for(b=d.length;b--;)a=d[b],e.push({isNull:null===a,value:a,color:this.calcColor(b,a,c),offset:c});return e},calcColor:function(a,b,e){var f,g,h=this.colorMapFunction,i=this.options;return h&&(g=h(this,i,e,b))?f=g:(f=this.stacked?i.get("stackedBarColor"):b<0?i.get("negBarColor"):i.get("barColor"),0===b&&i.get("zeroColor")!==c&&(f=i.get("zeroColor"))),d.isArray(f)?f[a%f.length]:f},renderRegion:function(a,e){var f,g,h,i,j,k,l,m,n,p,q=this.values[a],r=this.options,s=this.xaxisOffset,t=[],u=this.range,v=this.stacked,w=this.target,x=a*this.totalBarWidth,y=this.canvasHeightEf,z=this.yoffset;if(q=d.isArray(q)?q:[q],l=q.length,m=q[0],i=o(null,q),p=o(s,q,!0),i)return r.get("nullColor")?(h=e?r.get("nullColor"):this.calcHighlightColor(r.get("nullColor"),r),f=z>0?z-1:z,w.drawRect(x,f,this.barWidth-1,0,h,h)):c;for(j=z,k=0;k<l;k++){if(m=q[k],v&&m===s){if(!p||n)continue;n=!0}g=u>0?b.floor(y*(b.abs(m-s)/u))+1:1,m<s||m===s&&0===z?(f=j,j+=g):(f=z-g,z-=g),h=this.calcColor(k,m,a),e&&(h=this.calcHighlightColor(h,r)),t.push(w.drawRect(x*this.xScale,f,(this.barWidth-1)*this.xScale,g-1,h,h))}return 1===t.length?t[0]:t}}),d.fn.sparkline.stack=D=f(d.fn.sparkline._base,{type:"stack",init:function(a,b,c,e,f){var g,h=0;if(D._super.init.call(this,a,b,c,e,f),this.shapes={},this.valueShapes={},this.values=b=d.map(b,Number),"auto"===c.get("width")&&(this.width=this.height),b.length>0)for(g=b.length;g--;)h+=b[g];this.total=h,this.initTarget(),this.height=this.canvasHeight,this.width=this.canvasWidth},getRegion:function(a,b,d){var e=this.target.getShapeAt(a,b,d);return e!==c&&this.shapes[e]!==c?this.shapes[e]:c},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],percent:this.values[a]/this.total*100,color:this.options.get("sliceColors")[a%this.options.get("sliceColors").length],offset:a}},changeHighlight:function(a){var b=this.currentRegion,c=this.renderSlice(b,a),d=this.valueShapes[b];delete this.shapes[d],this.target.replaceWithShape(d,c),this.valueShapes[b]=c.id,this.shapes[c.id]=b},renderSlice:function(a,d){var e,f,g,h=this.target,i=this.options,j=this.height,k=this.width,l=this.values,m=this.total,n=0,o=0;for(f=l.length,e=0;e<f;e++){n=o;var p=b.round(l[e]*k/m);if(a===e)return g=i.get("sliceColors")[e%i.get("sliceColors").length],d&&(g=this.calcHighlightColor(g,i)),h.drawRect(n,0,p,j,c,g);o+=p}},render:function(){var a,b,c=this.target,d=this.values,e=this.options;e.get("borderWidth");if(D._super.render.call(this)){for(b=0;b<d.length;b++)d[b]&&(a=this.renderSlice(b).append(),this.valueShapes[b]=a.id,this.shapes[a.id]=b);c.render()}}}),d.fn.sparkline.tristate=z=f(d.fn.sparkline._base,w,{type:"tristate",init:function(a,c,e,f,g){var h=parseInt(e.get("barWidth"),10),i=parseInt(e.get("barSpacing"),10);z._super.init.call(this,a,c,e,f,g),this.regionShapes={},this.barWidth=h,this.barSpacing=i,this.totalBarWidth=h+i,this.values=d.map(c,Number);var j=c.length*h+(c.length-1)*i;this.xScale=b.min(1,j?f/j:1),this.width=j*this.xScale,this.initColorMap(),this.initTarget()},getRegion:function(a,c,d){return b.floor(c*window.devicePixelRatio/this.totalBarWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],color:this.calcColor(this.values[a],a),offset:a}},calcColor:function(a,b){var c,d,e=this.options,f=this.colorMapFunction;return c=f&&(d=f(this,e,b,a))?d:a<0?e.get("negBarColor"):a>0?e.get("posBarColor"):e.get("zeroBarColor")},renderRegion:function(a,c){var d,e,f,g,h,i,j=this.values,k=this.options,l=this.target;if(d=l.pixelHeight,f=b.round(d/2),g=a*this.totalBarWidth,j[a]<0?(h=f,e=f-1):j[a]>0?(h=0,e=f-1):(h=f-1,e=2),i=this.calcColor(j[a],a),null!==i)return c&&(i=this.calcHighlightColor(i,k)),l.drawRect(g*this.xScale,h,(this.barWidth-1)*this.xScale,e-1,i,i)}}),d.fn.sparkline.discrete=A=f(d.fn.sparkline._base,w,{type:"discrete",init:function(a,e,f,g,h){A._super.init.call(this,a,e,f,g,h),this.regionShapes={},this.values=e=d.map(e,Number),this.min=b.min.apply(b,e),this.max=b.max.apply(b,e),this.range=this.max-this.min,this.width=g="auto"===f.get("width")?2*e.length:this.width,this.interval=b.floor(g/e.length),this.itemWidth=g/e.length,f.get("chartRangeMin")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMin")<this.min)&&(this.min=f.get("chartRangeMin")),f.get("chartRangeMax")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMax")>this.max)&&(this.max=f.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===f.get("lineHeight")?b.round(.3*this.canvasHeight):f.get("lineHeight"))},getRegion:function(a,c,d){return b.floor(c*window.devicePixelRatio/this.itemWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],offset:a}},renderRegion:function(a,c){var d,e,f,g,i=this.values,j=this.options,k=this.min,l=this.max,m=this.range,n=this.interval,o=this.target,p=this.canvasHeight,q=this.lineHeight,r=p-q;return e=h(i[a],k,l),g=a*n,d=b.round(r-r*((e-k)/m)),f=j.get("thresholdColor")&&e<j.get("thresholdValue")?j.get("thresholdColor"):j.get("lineColor"),c&&(f=this.calcHighlightColor(f,j)),o.drawLine(g,d,g,d+q,f)}}),d.fn.sparkline.bullet=B=f(d.fn.sparkline._base,{type:"bullet",init:function(a,d,e,f,g){var h,i,j;B._super.init.call(this,a,d,e,f,g),this.values=d=l(d),j=d.slice(),j[0]=null===j[0]?j[2]:j[0],j[1]=null===d[1]?j[2]:j[1],h=b.min.apply(b,d),i=b.max.apply(b,d),h=e.get("base")===c?h<0?h:0:e.get("base"),this.min=h,this.max=i,this.range=i-h;var k=e.get("rangeColors");
if(e.get("gradient")&&k.length>1){var m=new Rainbow;m.setSpectrumByArray(k),m.setNumberRange(0,this.values.length);for(var n=0;n<this.values.length;n++)k[n]=m.colorAt(n)}this.rangeColors=k,this.shapes={},this.valueShapes={},this.regiondata={},this.width=f="auto"===e.get("width")?"4.0em":f,this.target=this.$el.simpledraw(f,g,e.get("composite")),d.length||(this.disabled=!0),this.initTarget()},getRegion:function(a,b,d){var e=this.target.getShapeAt(a,b,d);return e!==c&&this.shapes[e]!==c?this.shapes[e]:c},getCurrentRegionFields:function(){var a=this.currentRegion;return{fieldkey:a.substr(0,1),value:this.values[a.substr(1)],region:a}},changeHighlight:function(a){var b,c=this.currentRegion,d=this.valueShapes[c];switch(delete this.shapes[d],c.substr(0,1)){case"r":b=this.renderRange(c.substr(1),a);break;case"p":b=this.renderPerformance(a);break;case"t":b=this.renderTarget(a)}this.valueShapes[c]=b.id,this.shapes[b.id]=c,this.target.replaceWithShape(d,b)},renderRange:function(a,c){var d=this.values[a],e=b.round(this.canvasWidth*((d-this.min)/this.range)),f=this.rangeColors[a-2];return c&&(f=this.calcHighlightColor(f,this.options)),this.target.drawRect(0,0,e-1,this.canvasHeight-1,f,f)},renderPerformance:function(a){var c=this.values[1],d=b.round(this.canvasWidth*((c-this.min)/this.range)),e=this.options.get("performanceColor");return a&&(e=this.calcHighlightColor(e,this.options)),this.target.drawRect(0,b.round(.3*this.canvasHeight),d-1,b.round(.4*this.canvasHeight)-1,e,e)},renderTarget:function(a){var c=this.values[0],d=b.round(this.canvasWidth*((c-this.min)/this.range)-this.options.get("targetWidth")/2),e=b.round(.1*this.canvasHeight),f=this.canvasHeight-2*e,g=this.options.get("targetColor");return a&&(g=this.calcHighlightColor(g,this.options)),this.target.drawRect(d,e,this.options.get("targetWidth")-1,f-1,g,g)},render:function(){var a,b,c=this.values.length,d=this.target;if(B._super.render.call(this)){for(a=2;a<c;a++)b=this.renderRange(a).append(),this.shapes[b.id]="r"+a,this.valueShapes["r"+a]=b.id;null!==this.values[1]&&(b=this.renderPerformance().append(),this.shapes[b.id]="p1",this.valueShapes.p1=b.id),null!==this.values[0]&&(b=this.renderTarget().append(),this.shapes[b.id]="t0",this.valueShapes.t0=b.id),d.render()}}}),d.fn.sparkline.pie=C=f(d.fn.sparkline._base,{type:"pie",init:function(a,c,e,f,g){var h,i=0;if(C._super.init.call(this,a,c,e,f,g),this.shapes={},this.valueShapes={},this.values=c=d.map(c,Number),"auto"===e.get("width")&&(this.width=this.height),c.length>0)for(h=c.length;h--;)i+=c[h];this.total=i,this.initTarget(),this.radius=b.floor(b.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(a,b,d){var e=this.target.getShapeAt(a,b,d);return e!==c&&this.shapes[e]!==c?this.shapes[e]:c},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],percent:this.values[a]/this.total*100,color:this.options.get("sliceColors")[a%this.options.get("sliceColors").length],offset:a}},changeHighlight:function(a){var b=this.currentRegion,c=this.renderSlice(b,a),d=this.valueShapes[b];delete this.shapes[d],this.target.replaceWithShape(d,c),this.valueShapes[b]=c.id,this.shapes[c.id]=b},renderSlice:function(a,d){var e,f,g,h,i,j=this.target,k=this.options,l=this.radius,m=k.get("borderWidth"),n=k.get("offset"),o=2*b.PI,p=this.values,q=this.total,r=n?2*b.PI*(n/360):0;for(h=p.length,g=0;g<h;g++){if(e=r,f=r,q>0&&(f=r+o*(p[g]/q)),a===g)return i=k.get("sliceColors")[g%k.get("sliceColors").length],d&&(i=this.calcHighlightColor(i,k)),j.drawPieSlice(l,l,l-m,e,f,c,i);r=f}},render:function(){var a,d,e=this.target,f=this.values,g=this.options,h=this.radius,i=g.get("borderWidth");if(C._super.render.call(this)){for(i&&e.drawCircle(h,h,b.floor(h-i/2),g.get("borderColor"),c,i).append(),d=f.length;d--;)f[d]&&(a=this.renderSlice(d).append(),this.valueShapes[d]=a.id,this.shapes[a.id]=d);e.render()}}}),d.fn.sparkline.box=E=f(d.fn.sparkline._base,{type:"box",init:function(a,b,c,e,f){E._super.init.call(this,a,b,c,e,f),this.values=d.map(b,Number),this.width="auto"===c.get("width")?"4.0em":e,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var a=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==c&&a.push({field:"lo",value:this.loutlier}),this.routlier!==c&&a.push({field:"ro",value:this.routlier}),this.lwhisker!==c&&a.push({field:"lw",value:this.lwhisker}),this.rwhisker!==c&&a.push({field:"rw",value:this.rwhisker}),a},render:function(){var a,d,e,f,g,h,i,k,l,m,n,o,p=this.target,q=this.values,r=q.length,s=this.options,t=this.canvasWidth,u=this.canvasHeight,v=s.get("chartRangeMin")===c?b.min.apply(b,q):s.get("chartRangeMin"),w=s.get("chartRangeMax")===c?b.max.apply(b,q):s.get("chartRangeMax"),x=0;if(E._super.render.call(this)){if(s.get("raw"))s.get("showOutliers")&&q.length>5?(d=q[0],a=q[1],f=q[2],g=q[3],h=q[4],i=q[5],k=q[6]):(a=q[0],f=q[1],g=q[2],h=q[3],i=q[4]);else if(q.sort(function(a,b){return a-b}),f=j(q,1),g=j(q,2),h=j(q,3),e=h-f,s.get("showOutliers")){for(a=i=c,l=0;l<r;l++)a===c&&q[l]>f-e*s.get("outlierIQR")&&(a=q[l]),q[l]<h+e*s.get("outlierIQR")&&(i=q[l]);d=q[0],k=q[r-1]}else a=q[0],i=q[r-1];this.quartiles=[f,g,h],this.lwhisker=a,this.rwhisker=i,this.loutlier=d,this.routlier=k,o=0,w-v==0&&(o=1),n=t/(w-v+o),s.get("showOutliers")&&(x=b.ceil(s.get("spotRadius")),t-=2*b.ceil(s.get("spotRadius")),n=t/(w-v+o),d<a&&p.drawCircle((d-v)*n+x,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append(),k>i&&p.drawCircle((k-v)*n+x,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append()),p.drawRect(b.round((f-v)*n+x),b.round(.1*u),b.round((h-f)*n),b.round(.8*u),s.get("boxLineColor"),s.get("boxFillColor"),s.get("lineWidth"),s.get("cornerRadius")).append();var y=f-v;if(s.get("strikeThrough")&&(y=i-v),p.drawLine(b.round((a-v)*n+x),b.round(u/2),b.round(y*n+x),b.round(u/2),s.get("lineColor"),s.get("lineWidth")).append(),p.drawLine(b.round((a-v)*n+x),b.round(u/4),b.round((a-v)*n+x),b.round(u-u/4),s.get("whiskerColor"),s.get("lineWidth")).append(),s.get("strikeThrough")||p.drawLine(b.round((i-v)*n+x),b.round(u/2),b.round((h-v)*n+x),b.round(u/2),s.get("lineColor"),s.get("lineWidth")).append(),p.drawLine(b.round((i-v)*n+x),b.round(u/4),b.round((i-v)*n+x),b.round(u-u/4),s.get("whiskerColor"),s.get("lineWidth")).append(),p.drawLine(b.round((g-v)*n+x),b.round(.1*u),b.round((g-v)*n+x),b.round(.9*u),s.get("medianColor"),s.get("medianWidth")).append(),"number"==typeof s.get("target")){m=b.ceil(s.get("spotRadius"));var z=s.get("target"),A=s.get("targetObj");A&&"crosshair"!=A?"circle"==A&&p.drawCircle((z-v)*n+x,u/2,s.get("spotRadius"),s.get("targetColor"),s.get("targetColor")).append():(p.drawLine(b.round((z-v)*n+x),b.round(u/2-m),b.round((z-v)*n+x),b.round(u/2+m),s.get("targetColor")).append(),p.drawLine(b.round((z-v)*n+x-m),b.round(u/2),b.round((z-v)*n+x+m),b.round(u/2),s.get("targetColor")).append())}p.render()}}}),function(a){a.fn.sparkline.timeline=F=f(a.fn.sparkline._base,w,{type:"timeline",init:function(c,d,e,f,g){function h(a){return a/6e4}function i(a){return a=b.abs(a),isNaN(a)?0:a}function j(a,c){return b.ceil(q*(h(a)-c))}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(F._super.init.call(this,c,d,e,f,g),this.regionShapes={},this.initTarget(),this.segments=[],this.timemarks=[],u=i(e.mergedOptions.timeMarkInterval),t="vertical"===e.mergedOptions.orientation,r=a.isFunction(e.mergedOptions.init)?e.mergedOptions.init:function(a){return a},n=h(e.mergedOptions.begin),o=h(e.mergedOptions.finish),p=o-n,q=t?(this.canvasHeight-1)/p:(this.canvasWidth-1)/p,u>0){for(s=u*q,k=0;k<p*q/s+1;k++)x={x1:0,y1:0,x2:0,y2:0,lc:"#ff0011",w:1},w=b.round(k*s),y=b.ceil(w/q)%60===0?3:1,t?(x.x2=y,x.y1=x.y2=w):(x.y2=y,x.x1=x.x2=w),this.timemarks.push(x);t?this.timemarks.push({x1:0,y1:0,x2:0,y2:this.canvasHeight,lc:"#eee",w:1}):this.timemarks.push({x1:0,y1:0,x2:this.canvasWidth,y2:0,lc:"#eee",w:1})}for(v=u>0?1:0,k=0;k<d.length;k++)d[k]&&(l=r(d[k],k),l&&(m={x:v,y:v,w:f-(v+1),h:g-(v+1),data:l},t?(m.y=j(l.begin,n),m.h=j(l.finish,h(l.begin))):(m.x=j(l.begin,n),m.w=j(l.finish,h(l.begin))),m.fc=l.color||e.mergedOptions.fillColor,m.lc=l.lineColor||e.mergedOptions.lineColor,this.segments.push(m)));this.segments=this.segments.sort(function(a,b){var c,d,e,f;return c=Number(a.data.begin),e=Number(b.data.begin),d=Number(a.data.finish),f=Number(b.data.finish),e-c+(f-d)})},getRegion:function(a,b,c){return{el:a,x:b,y:c}},getCurrentRegionFields:function(){var a,b,c,d,e,f,g,h,i,j=[];for(b=this.currentRegion.el,c=this.currentRegion.x,d=this.currentRegion.y,a=0;a<this.segments.length;a++)e=this.segments[a],e&&(f=e.x,g=f+e.w,h=e.y,i=h+e.h,c>f&&c<g&&d>h&&d<i&&j.push(e.data));return j},renderRegion:function(a,b){var c,d,e,f=[],g=this.target;if(0===a)for(c=0;c<this.timemarks.length;c++)d=this.timemarks[c],f.push(g.drawLine(d.x1,d.y1,d.x2,d.y2,d.lc,d.w));return e=this.segments[a],e&&f.push(g.drawRect(e.x,e.y,e.w,e.h,e.lc,e.fc)),f}})}(jQuery),I=f({init:function(a,b,c,d){this.target=a,this.id=b,this.type=c,this.args=d},append:function(){return this.target.appendShape(this),this}}),J=f({_pxregex:/(\d+)(px)?\s*$/i,init:function(a,b,c){a&&(this.width=a,this.height=b,this.target=c,this.lastShapeId=null,c[0]&&(c=c[0]),d.data(c,"_jqs_vcanvas",this))},drawLine:function(a,b,c,d,e,f){return this.drawShape([[a,b],[c,d]],e,null,f)},drawShape:function(a,b,c,d){return this._genShape("Shape",[a,b,c,d])},drawCircle:function(a,b,c,d,e,f){return this._genShape("Circle",[a,b,c,d,e,f])},drawPieSlice:function(a,b,c,d,e,f,g){return this._genShape("PieSlice",[a,b,c,d,e,f,g])},drawRect:function(a,b,c,d,e,f,g,h){return this._genShape("Rect",[a,b,c,d,e,f,g,h])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(a,b){d(b).html(a)},_calculatePixelDims:function(a,b,c){var e;e=this._pxregex.exec(b),e?this.pixelHeight=e[1]:this.pixelHeight=d(c).height(),e=this._pxregex.exec(a),e?this.pixelWidth=e[1]:this.pixelWidth=d(c).width();var f=window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;this.pixelWidth*=f,this.pixelHeight*=f},_genShape:function(a,b){var c=O++;return b.unshift(c),new I(this,c,a,b)},appendShape:function(a){alert("appendShape not implemented")},replaceWithShape:function(a,b){alert("replaceWithShape not implemented")},insertAfterShape:function(a,b){alert("insertAfterShape not implemented")},removeShapeId:function(a){alert("removeShapeId not implemented")},getShapeAt:function(a,b,c){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),K=f(J,{init:function(b,e,f,g){K._super.init.call(this,b,e,f),this.canvas=a.createElement("canvas"),f[0]&&(f=f[0]),this.context=this.canvas.getContext("2d");var h=window.devicePixelRatio||1,i=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,j=h/i;d.data(f,"_jqs_vcanvas",this),d(this.canvas).css({display:"inline-block",width:b,height:e,verticalAlign:"top"}),this._insert(this.canvas,f),this._calculatePixelDims(b,e,this.canvas),this.canvas.width=this.pixelWidth*j,this.canvas.height=this.pixelHeight*j,this.context.scale(j,j),this.interact=g,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=c},_getContext:function(a,b,d){var e=this.canvas.getContext("2d");return a!==c&&(e.strokeStyle=a),e.lineWidth=d===c?1:d,b!==c&&(e.fillStyle=b),e},reset:function(){var a=this._getContext();a.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=c},_drawShape:function(a,b,d,e,f,g){var h,i,j=this._getContext(d,e,f),k=!1;if(g||(g=0),j.beginPath(),5===b.length&&(b[1][0]-b[0][0]<g&&(g=0),g>0&&(j.moveTo(b[0][0]+g+.5,b[0][1]+.5),j.lineTo(b[1][0]-g+.5,b[1][1]+.5),j.quadraticCurveTo(b[1][0]-g+.5,b[1][1]+.5,b[1][0]+.5,b[1][1]+g+.5),j.lineTo(b[2][0]+.5,b[2][1]-g+.5),j.quadraticCurveTo(b[2][0]+.5,b[2][1]-g+.5,b[2][0]-g+.5,b[2][1]+.5),j.lineTo(b[3][0]+g+.5,b[3][1]+.5),j.quadraticCurveTo(b[3][0]+g+.5,b[3][1]+.5,b[3][0]+.5,b[3][1]-g+.5),j.lineTo(b[4][0]+.5,b[4][1]+g+.5),j.quadraticCurveTo(b[4][0]+.5,b[4][1]+g+.5,b[4][0]+g+.5,b[4][1]+.5),k=!0)),!k)for(j.moveTo(b[0][0]+.5,b[0][1]+.5),h=1,i=b.length;h<i;h++)j.lineTo(b[h][0]+.5,b[h][1]+.5);d!==c&&j.stroke(),e!==c&&j.fill(),this.targetX!==c&&this.targetY!==c&&j.isPointInPath(this.targetX*window.devicePixelRatio,this.targetY*window.devicePixelRatio)&&(this.currentTargetShapeId=a)},_drawCircle:function(a,d,e,f,g,h,i){var j=this._getContext(g,h,i);j.beginPath(),j.arc(d,e,f,0,2*b.PI,!1),this.targetX!==c&&this.targetY!==c&&j.isPointInPath(this.targetX*window.devicePixelRatio,this.targetY*window.devicePixelRatio)&&(this.currentTargetShapeId=a),g!==c&&j.stroke(),h!==c&&j.fill()},_drawPieSlice:function(a,b,d,e,f,g,h,i){var j=this._getContext(h,i);j.beginPath(),j.moveTo(b,d),j.arc(b,d,e,f,g,!1),j.lineTo(b,d),j.closePath(),h!==c&&j.stroke(),i&&j.fill(),this.targetX!==c&&this.targetY!==c&&j.isPointInPath(this.targetX*window.devicePixelRatio,this.targetY*window.devicePixelRatio)&&(this.currentTargetShapeId=a)},_drawRect:function(a,b,c,d,e,f,g,h,i){return this._drawShape(a,[[b,c],[b+d,c],[b+d,c+e],[b,c+e],[b,c]],f,g,null,i)},appendShape:function(a){return this.shapes[a.id]=a,this.shapeseq.push(a.id),this.lastShapeId=a.id,a.id},replaceWithShape:function(a,b){var c,d=this.shapeseq;for(this.shapes[b.id]=b,c=d.length;c--;)d[c]==a&&(d[c]=b.id);delete this.shapes[a]},replaceWithShapes:function(a,b){var c,d,e,f=this.shapeseq,g={};for(d=a.length;d--;)g[a[d]]=!0;for(d=f.length;d--;)c=f[d],g[c]&&(f.splice(d,1),delete this.shapes[c],e=d);for(d=b.length;d--;)f.splice(e,0,b[d].id),this.shapes[b[d].id]=b[d]},insertAfterShape:function(a,b){var c,d=this.shapeseq;for(c=d.length;c--;)if(d[c]===a)return d.splice(c+1,0,b.id),void(this.shapes[b.id]=b)},removeShapeId:function(a){var b,c=this.shapeseq;for(b=c.length;b--;)if(c[b]===a){c.splice(b,1);break}delete this.shapes[a]},getShapeAt:function(a,b,c){return this.targetX=b*window.devicePixelRatio,this.targetY=c*window.devicePixelRatio,this.render(),this.currentTargetShapeId},render:function(){var a,b,c,d=this.shapeseq,e=this.shapes,f=d.length,g=this._getContext();for(g.clearRect(0,0,this.pixelWidth,this.pixelHeight),c=0;c<f;c++)a=d[c],b=e[a],this["_draw"+b.type].apply(this,b.args);this.interact||(this.shapes={},this.shapeseq=[])}}),L=f(J,{init:function(b,c,e){var f;L._super.init.call(this,b,c,e),e[0]&&(e=e[0]),d.data(e,"_jqs_vcanvas",this),this.canvas=a.createElement("span"),d(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:b,height:c,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,e),this._calculatePixelDims(b,c,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,f='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",f),this.group=d(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o=[];for(n=0,m=b.length;n<m;n++)o[n]=""+b[n][0]+","+b[n][1];return h=o.splice(0,1),f=f===c?1:f,i=d===c?' stroked="false" ':' strokeWeight="'+f+'px" strokeColor="'+d+'" ',j=e===c?' filled="false"':' fillColor="'+e+'" filled="true" ',k=o[0]===o[o.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+a+'" '+i+j+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+h+" l "+o.join(", ")+" "+k+'e"> </v:shape>'},_drawCircle:function(a,b,d,e,f,g,h){var i,j,k;return b-=e,d-=e,i=f===c?' stroked="false" ':' strokeWeight="'+h+'px" strokeColor="'+f+'" ',j=g===c?' filled="false"':' fillColor="'+g+'" filled="true" ',k='<v:oval  id="jqsshape'+a+'" '+i+j+' style="position:absolute;top:'+d+"px; left:"+b+"px; width:"+2*e+"px; height:"+2*e+'px"></v:oval>'},_drawPieSlice:function(a,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r;if(g===h)return"";if(h-g===2*b.PI&&(g=0,h=2*b.PI),l=d+b.round(b.cos(g)*f),m=e+b.round(b.sin(g)*f),n=d+b.round(b.cos(h)*f),o=e+b.round(b.sin(h)*f),l===n&&m===o){if(h-g<b.PI)return"";l=n=d+f,m=o=e}return l===n&&m===o&&h-g<b.PI?"":(k=[d-f,e-f,d+f,e+f,l,m,n,o],p=i===c?' stroked="false" ':' strokeWeight="1px" strokeColor="'+i+'" ',q=j===c?' filled="false"':' fillColor="'+j+'" filled="true" ',r='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+a+'" '+p+q+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+d+","+e+" wa "+k.join(", ")+' x e"> </v:shape>')},_drawRect:function(a,b,c,d,e,f,g,h,i){return this._drawShape(a,[[b,c],[b,c+e],[b+d,c+e],[b+d,c],[b,c]],f,g,h,i)},reset:function(){this.group.innerHTML=""},appendShape:function(a){var b=this["_draw"+a.type].apply(this,a.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",b):this.prerender+=b,this.lastShapeId=a.id,a.id},replaceWithShape:function(a,b){var c=d("#jqsshape"+a),e=this["_draw"+b.type].apply(this,b.args);c[0].outerHTML=e},replaceWithShapes:function(a,b){var c,e=d("#jqsshape"+a[0]),f="",g=b.length;for(c=0;c<g;c++)f+=this["_draw"+b[c].type].apply(this,b[c].args);for(e[0].outerHTML=f,c=1;c<a.length;c++)d("#jqsshape"+a[c]).remove()},insertAfterShape:function(a,b){var c=d("#jqsshape"+a),e=this["_draw"+b.type].apply(this,b.args);c[0].insertAdjacentHTML("afterEnd",e)},removeShapeId:function(a){var b=d("#jqsshape"+a);this.group.removeChild(b[0])},getShapeAt:function(a,b,c){var d=a.id.substr(8);return d},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math);